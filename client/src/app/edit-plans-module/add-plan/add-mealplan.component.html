<h2 mat-dialog-title align="center">Ajouter un plan repas</h2>
<mat-divider></mat-divider>
<br />

<div mat-dialog-content>
  <mat-vertical-stepper [linear]="false" #stepper>


    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Entrez un numero de plan</ng-template>
        <mat-form-field appearance="fill">
          <mat-label>Numero de plan</mat-label>
          <input [(ngModel)]="planNumber" maxlength='150' matInput  formControlName="firstCtrl" required>
        </mat-form-field>
        <div>
          <button mat-button matStepperNext>Prochaine étape</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="secondFormGroup">
      <form [formGroup]="secondFormGroup">
        <ng-template matStepLabel>Entrez une categorie</ng-template>
        <mat-form-field appearance="fill">
          <mat-label>Categorie</mat-label>
          <mat-select [(value)]="category" formControlName="secondCtrl">
            <mat-option *ngFor="let category of this.categories" [value]="category">
              {{ category }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <div>
          <button mat-button matStepperPrevious>Retour</button>
          <button mat-button matStepperNext>Prochaine étape</button>
        </div>
      </form>
    </mat-step>


    <mat-step [stepControl]="thirdFormGroup">
      <form [formGroup]="thirdFormGroup">
        <ng-template matStepLabel>Entrez une frequence</ng-template>
        <mat-form-field appearance="fill">
          <mat-label>Frequence</mat-label>
          <input [(ngModel)]="frequency" maxlength='150' matInput formControlName="thirdCtrl" required>
        </mat-form-field>
        <div>
          <button mat-button matStepperNext>Prochaine étape</button>
        </div>
      </form>
    </mat-step>


    <mat-step [stepControl]="fourthFormGroup">
      <form [formGroup]="fourthFormGroup">
        <ng-template matStepLabel>Entrez le nombre de personnes</ng-template>
        <mat-form-field appearance="fill">
          <mat-label>Nombre de personnes</mat-label>
          <input [(ngModel)]="numberOfPeople" maxlength='150' matInput formControlName="fourthCtrl" required>
        </mat-form-field>
        <div>
          <button mat-button matStepperNext>Prochaine étape</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="fifthFormGroup">
      <form [formGroup]="fifthFormGroup">
        <ng-template matStepLabel>Entrez le nombre de calories</ng-template>
        <mat-form-field appearance="fill">
          <mat-label>Nombre de calories</mat-label>
          <input [(ngModel)]="numberOfCalories" maxlength='150' matInput formControlName="fifthCtrl" required>
        </mat-form-field>
        <div>
          <button mat-button matStepperNext>Prochaine étape</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="sixthFormGroup">
      <form [formGroup]="sixthFormGroup">
        <ng-template matStepLabel>Entrez le prix</ng-template>
        <mat-form-field appearance="fill">
          <mat-label>Prix</mat-label>
          <input [(ngModel)]="price" maxlength='150' matInput formControlName="sixthCtrl" required>
        </mat-form-field>
        <div>
          <button mat-button matStepperNext>Prochaine étape</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="seventhFormGroup">
      <form [formGroup]="seventhFormGroup">
        <ng-template matStepLabel>Entrez le numero du fournisseur</ng-template>
        <mat-form-field appearance="fill">
          <mat-label>Numero du fournisseur</mat-label>
          <mat-select [(value)]="supplierNumber" formControlName="seventhFormGroup">
            <mat-option *ngFor="let supplier of this.suppliers" [value]="supplier.supplierNumber">
              {{ supplier.supplierNumber }} : {{ supplier.supplierName }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <div>
          <button mat-button matStepperPrevious>Retour</button>
          <button mat-button matStepperNext>Prochaine étape</button>
        </div>
      </form>
    </mat-step>


    <mat-step>
      <ng-template matStepLabel>Révision de l'ajout</ng-template>
      <mat-card class="example-card">
        <mat-card-subtitle *ngIf="planNumber">Numero du plan :{{ planNumber }}</mat-card-subtitle>
          <mat-card-subtitle *ngIf="!planNumber" ngClass="to-be-defined">Numero du plan : à définir</mat-card-subtitle>
        <mat-card-content>
          <ul>
            <li *ngIf="(category!==null)">
              Categorie : {{ category }}
            </li>
              <li *ngIf="(category===null)" ngClass="to-be-defined">
                Categorie : à définir
              </li>
            <li *ngIf="(frequency!==null)">
              Frequence : {{ frequency }}
            </li>
              <li *ngIf="(frequency===null)" ngClass="to-be-defined">
                Frequence : à définir
              </li>
            <li *ngIf="(numberOfPeople!==null)">
              Nombre de personnes :{{ numberOfPeople }}
            </li>
              <li *ngIf="(numberOfPeople===null)" ngClass="to-be-defined">
                Nombre de personnes : à définir
              </li>
            <li *ngIf="(numberOfCalories !== null)">
              Nombre de calories :{{ numberOfCalories }}
            </li>
              <li *ngIf="(numberOfCalories === null)" ngClass="to-be-defined">
                Nombre de calories : à définir
              </li>
            <li *ngIf="(price !== null)">
              Prix : {{ price }}
            </li>
              <li *ngIf="(price === null)" ngClass="to-be-defined">
                Prix : à définir
              </li>
            <li *ngIf="(supplierNumber!==null)">
              Numero du Fournisseur :{{ supplierNumber }}
            </li>
              <li *ngIf="(supplierNumber===null)" ngClass="to-be-defined">
                Numero du Fournisseur : à définir
              </li>
          </ul>
        </mat-card-content>
      </mat-card>
      <div>
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button (click)="stepper.reset()">Réinitialiser</button>
      </div>
    </mat-step>
  </mat-vertical-stepper>
</div>
<mat-divider></mat-divider>
<div style="display: flex; justify-content: space-between; align-items: center; align-content: space-between; flex-direction: row;" mat-dialog-actions>
  
  <div>
    <button mat-button mat-dialog-close color="primary" *ngIf="this.allFormFieldAreCompleted()" (click)="this.addMealPlan()">Ajouter !</button>
    <button mat-button mat-dialog-close color="primary">Annuler <mat-icon>clear</mat-icon></button>
  </div>
</div>
